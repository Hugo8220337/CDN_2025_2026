<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ticketing Platform</title>

    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    
    <link rel="stylesheet" href="style.css">

  </head>
  <body>
    <div class="container py-4">
      <!-- Header -->
      <div class="row mb-4">
        <div class="col-12 text-center text-white">
          <h1 class="display-4 mb-3">
            <i class="bi bi-ticket-perforated"></i> Sistema de Fila de Bilhetes
          </h1>
        </div>
      </div>

      <!-- Main Queue Information -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card bg-light">
            <div class="card-body text-center py-5">
              <h2 class="card-title mb-4">
                <i class="bi bi-graph-up"></i> Posição na Fila
              </h2>
              <div class="queue-position text-primary pulse" id="position">
                15
              </div>

              <!-- Progress Bar -->
              <div class="progress mt-4 mb-4 mx-auto" style="max-width: 500px">
                <div
                  class="progress-bar"
                  id="progressBar"
                  style="width: 25%"
                ></div>
              </div>

              <!-- Metrics Row -->
              <div class="row mt-4">
                <div class="col-md-4">
                  <div class="card metric-card">
                    <div class="card-body text-center">
                      <div class="metric-value" id="totalUsers">250</div>
                      <div class="card-text">Total na Fila</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card metric-card">
                    <div class="card-body text-center">
                      <div class="metric-value" id="processedUsers">60</div>
                      <div class="card-text">Já Atendidos</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card metric-card">
                    <div class="card-body text-center">
                      <div class="metric-value" id="completionRate">24%</div>
                      <div class="card-text">Taxa de Progresso</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="./index.js"></script>
    <script>
      // Atualizar a cada 10 segundos
      setInterval(updateQueueData, 10000);

      // Atualizar tempo na fila a cada segundo
      setInterval(() => {
        const timeElement = document.getElementById("timeInQueue");
        const time = timeElement.textContent;
        const [minutes, seconds] = time.split(" ")[0].split("m");
        let totalSeconds = parseInt(minutes) * 60 + parseInt(seconds);
        totalSeconds++;
        const newMinutes = Math.floor(totalSeconds / 60);
        const newSeconds = totalSeconds % 60;
        timeElement.textContent = `${newMinutes}m ${newSeconds}s`;
      }, 1000);

      // Inicializar
      updateQueueData();
    </script>
  </body>
</html>
